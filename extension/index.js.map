{"version":3,"file":"index.js","sources":["../src/extension/lib/Time.ts","../src/extension/lib/Timekeeper.ts","../src/extension/est-survival.ts","../src/extension/lib/horaro.ts","../src/extension/programs.ts","../src/extension/index.ts"],"sourcesContent":["export class Time {\n  readonly display: string;\n  readonly rawInSecond: number;\n\n  private constructor(rawInSecond: number) {\n    this.rawInSecond = rawInSecond;\n\n    const hours = Math.floor(rawInSecond / 3600);\n    const minutes = Math.floor((rawInSecond % 3600) / 60);\n    const seconds = Math.floor(rawInSecond % 60);\n\n    const display =\n      (hours > 0 ? hours.toString().padStart(2, '0') + ':' : '') +\n      `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n\n    this.display = display;\n  }\n\n  public static make = (seconds: number): Time => {\n    return new this(seconds);\n  };\n}\n","import { Run, Segment, Timer, TimeSpan } from 'livesplit-core';\nimport { Time } from './Time';\n\nexport type TimeStatus = 'in_progress' | 'paused' | 'finished';\n\nconst TimerPhase = {\n  notRunning: 0,\n  running: 1,\n  ended: 2,\n  paused: 3,\n} as const;\n\nexport class Timekeeper {\n  protected livesplit: Timer;\n\n  constructor(initialSeconds?: number) {\n    const run = Run.new();\n    run.pushSegment(Segment.new('Finish'));\n\n    const timer = Timer.new(run);\n    if (!timer) {\n      throw new Error('Failed to create livesplit timer!');\n    }\n\n    timer.setLoadingTimes(TimeSpan.fromSeconds(0));\n    if (initialSeconds && initialSeconds > 0) {\n      this.initExistsTime(timer, initialSeconds);\n    }\n    timer.initializeGameTime();\n\n    this.livesplit = timer;\n  }\n\n  start(): void {\n    const phase = this.livesplit.currentPhase();\n    this.livesplit.start();\n    this.livesplit.pause();\n    this.livesplit.setGameTime(TimeSpan.fromSeconds(0));\n    this.livesplit.resume();\n\n    if (phase !== TimerPhase.notRunning) {\n      throw new Error(\n        'This would be nothing happened. You need to reset to start timer.',\n      );\n    }\n  }\n\n  pause(): Time {\n    const phase = this.livesplit.currentPhase();\n    this.livesplit.pause();\n\n    if (phase !== TimerPhase.running) {\n      throw new Error(\n        \"This would be nothing happened. You can pause timer only when it's running.\",\n      );\n    }\n\n    return this.currentTime;\n  }\n\n  resume(): void {\n    const phase = this.livesplit.currentPhase();\n    this.livesplit.resume();\n\n    if (phase !== TimerPhase.paused) {\n      throw new Error(\n        \"This would be nothing happened. You can resume timer only when it's paused.\",\n      );\n    }\n  }\n\n  finish(): Time {\n    this.livesplit.split();\n\n    const time = this.currentTime;\n\n    return time;\n  }\n\n  reset(): void {\n    this.livesplit.reset(false);\n  }\n\n  initExistsTime(timer: Timer, initSeconds: number): Timer {\n    timer.start();\n    timer.pause();\n    timer.setGameTime(TimeSpan.fromSeconds(initSeconds));\n    return timer;\n  }\n\n  get status(): TimeStatus {\n    switch (this.livesplit.currentPhase()) {\n      case TimerPhase.paused:\n        return 'paused';\n      case TimerPhase.running:\n        return 'in_progress';\n      default:\n        return 'finished';\n    }\n  }\n\n  get currentTime(): Time {\n    const totalSeconds = this.currentTimeSeconds;\n\n    return Time.make(totalSeconds);\n  }\n\n  get currentTimeSeconds(): number {\n    return this.livesplit.currentTime().gameTime()?.totalSeconds() || 0;\n  }\n}\n","import NodeCG from 'nodecg/types';\nimport { ServerNodecgInstance } from '../nodecg/nodecg';\nimport { Timekeeper } from './lib/Timekeeper';\nimport { RunDataActiveRun } from '../nodecg/externals/speedcontrol';\nimport { Time } from './lib/Time';\n\nconst estSurvival = (nodecg: ServerNodecgInstance) => {\n  const tickRateMs = 100;\n\n  const timekeepingRep = nodecg.Replicant('timekeeping', {\n    defaultValue: {\n      time: {\n        display: '00:00',\n        rawInSecond: 0,\n      },\n      status: 'finished',\n    },\n  });\n  const penaltyRep = nodecg.Replicant('est-penalties', {\n    defaultValue: 0,\n  });\n  const estTimesRep = nodecg.Replicant('est-times', {\n    defaultValue: {\n      display: '00:00',\n      rawInSecond: 0,\n    },\n  });\n  const currentRunRep = (\n    nodecg as unknown as NodeCG.ServerAPI\n  ).Replicant<RunDataActiveRun>('runDataActiveRun', 'nodecg-speedcontrol');\n\n  const timekeeper = new Timekeeper(timekeepingRep.value.time.rawInSecond);\n  if (timekeepingRep.value.status === 'in_progress') {\n    timekeeper.resume();\n  }\n\n  const tick = () => {\n    const time = timekeeper.currentTime;\n    const status = timekeeper.status;\n\n    if (penaltyRep.value !== undefined && currentRunRep.value?.estimateS) {\n      const totalTime = currentRunRep.value.estimateS;\n      const penaltyTime = penaltyRep.value * 60;\n      const totalTimeWithPenalty = totalTime - penaltyTime;\n      const currentTime = Time.make(\n        Math.max(totalTimeWithPenalty - time.rawInSecond, 0),\n      );\n\n      estTimesRep.value = {\n        display: currentTime.display,\n        rawInSecond: currentTime.rawInSecond,\n      };\n\n      if (currentTime.rawInSecond <= 0) {\n        nodecg.sendMessage('est:over');\n      }\n    }\n\n    timekeepingRep.value = { time, status };\n  };\n\n  setInterval(tick, tickRateMs);\n\n  nodecg.listenFor('est:start', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    try {\n      timekeeper.start();\n    } catch (e) {\n      if (cb && e instanceof Error) {\n        cb(e);\n      }\n    }\n\n    cb(null);\n  });\n\n  nodecg.listenFor('est:pause', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    try {\n      timekeeper.pause();\n      cb(null);\n    } catch (e) {\n      if (cb && e instanceof Error) {\n        cb(e);\n      }\n    }\n  });\n\n  nodecg.listenFor('est:resume', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    try {\n      timekeeper.resume();\n    } catch (e) {\n      if (cb && e instanceof Error) {\n        cb(e);\n      }\n    }\n\n    cb(null);\n  });\n\n  nodecg.listenFor('est:finish', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    try {\n      timekeeper.finish();\n      cb(null);\n    } catch (e) {\n      if (cb && e instanceof Error) {\n        cb(e);\n      }\n    }\n  });\n\n  nodecg.listenFor('est:reset', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    try {\n      timekeeper.reset();\n      cb(null);\n    } catch (e) {\n      if (cb && e instanceof Error) {\n        cb(e);\n      }\n    }\n  });\n\n  nodecg.listenFor('est:plus', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    penaltyRep.value += 1;\n    cb(null);\n  });\n\n  nodecg.listenFor('est:minus', (_, cb) => {\n    if (!cb || cb.handled) {\n      return;\n    }\n\n    penaltyRep.value -= 1;\n    cb(null);\n  });\n};\n\nexport default estSurvival;\n","import got from 'got';\n\nconst BASE_URL = 'https://horaro.org/-/api/v1';\n\ntype HoraroResponse<D> = {\n  data: D;\n};\n\ntype Schedule = {\n  id: string;\n  name: string;\n  slug: string;\n  columns: string[];\n  items: ScheduleItem[];\n};\n\ntype ScheduleItem = {\n  length_t: number;\n  data: string[];\n};\n\n/**\n * Fetches a specific schedule by ID or slug.\n * @param {string} event - The ID or slug of the event.\n * @param {string} idOrSlug - The ID or slug of the schedule.\n * @returns {Promise<HoraroResponse<Schedule>>} - The response containing the schedule details.\n */\nexport async function fetchScheduleByIdOrSlug(\n  event: string,\n  idOrSlug: string,\n): Promise<HoraroResponse<Schedule>> {\n  const url = `${BASE_URL}/events/${event}/schedules/${idOrSlug}`;\n  return got(url).json();\n}\n","import { ServerNodecgInstance } from '../nodecg/nodecg';\nimport { Program } from '../nodecg/replicants';\nimport { fetchScheduleByIdOrSlug } from './lib/horaro';\nimport { err, ok } from 'neverthrow';\n\nconst defaultProgram: Program = {\n  name: '',\n  estimate: '0:00:00',\n  estimateInSeconds: 0,\n};\n\nconst horaroUrlToSlugs = (url: string) => {\n  const match = url.match(/horaro\\.org\\/([^/]+)\\/([^/]+)/);\n  if (!match) {\n    return null;\n  }\n  return {\n    event: match[1],\n    slug: match[2],\n  };\n};\n\nconst fetchColumns = async (url: string) => {\n  const slugs = horaroUrlToSlugs(url);\n  if (!slugs) {\n    return err('Invalid URL');\n  }\n\n  const { event, slug } = slugs;\n  const schedule = await fetchScheduleByIdOrSlug(event, slug);\n\n  return ok(schedule.data.columns);\n};\n\nconst fetchScheduleItems = async (url: string, columns: { title: number }) => {\n  const slugs = horaroUrlToSlugs(url);\n  if (!slugs) {\n    return err('Invalid URL');\n  }\n\n  const { event, slug } = slugs;\n  const schedule = await fetchScheduleByIdOrSlug(event, slug);\n\n  if (columns.title >= schedule.data.columns.length) {\n    return err('Invalid column index');\n  }\n\n  const items = schedule.data.items.map(item => ({\n    name: item.data[columns.title],\n    estimateInSeconds: item.length_t,\n  }));\n\n  return ok(items);\n};\n\nconst secondsToTimePresentation = (seconds: number) => {\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  return `${hours}:${minutes.toString().padStart(2, '0')}:${secs\n    .toString()\n    .padStart(2, '0')}`;\n};\n\nconst programs = (nodecg: ServerNodecgInstance) => {\n  const logger = new nodecg.Logger('programs');\n  const programsRep = nodecg.Replicant('programs', {\n    defaultValue: [],\n  });\n  nodecg.Replicant('current-program', {\n    defaultValue: defaultProgram,\n  });\n\n  nodecg.listenFor('programs:getColumns', async ({ url }, cb) => {\n    if (!cb || cb?.handled) {\n      return;\n    }\n    const columns = await fetchColumns(url);\n    if (columns.isErr()) {\n      logger.error(`Failed to fetch columns: ${columns.error}`);\n      return cb(columns.error);\n    }\n\n    logger.info(`Fetched columns: ${columns.value}`);\n    return cb(null, { columns: columns.value });\n  });\n\n  nodecg.listenFor('programs:loadSchedule', async ({ url, columns }, cb) => {\n    if (!cb || cb?.handled) {\n      return;\n    }\n    const items = await fetchScheduleItems(url, columns);\n    if (items.isErr()) {\n      logger.error(`Failed to fetch schedule items: ${items.error}`);\n      return cb(items.error);\n    }\n\n    programsRep.value = items.value.map(item => ({\n      ...item,\n      estimate: secondsToTimePresentation(item.estimateInSeconds),\n    }));\n\n    return cb(null);\n  });\n};\n\nexport default programs;\n","import { ServerNodecgInstance } from '../nodecg/nodecg.js';\nimport estSurvival from './est-survival.js';\nimport programs from './programs.js';\n\nexport default (nodecg: ServerNodecgInstance) => {\n  programs(nodecg);\n  estSurvival(nodecg);\n};\n"],"names":["__publicField","Run","Segment","Timer","TimeSpan","got","err","ok"],"mappings":"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"}